# baseURI: http://tno.io/SFShape
# imports: http://datashapes.org/dash
# prefix: SFShape

@prefix SFShape: <http://tno.io/SFShape#> .
@prefix : <http://tno.io/SFShape#> .
@prefix dash: <http://datashapes.org/dash#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix DT: <http://tno.io/DigitalTwin#> .
@prefix businessServicee: <http://tno.io/BusinessService#> .
@prefix event: <http://tno.io/Event#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<http://tno.io/SFShape>
  rdf:type owl:Ontology ;
  owl:imports <http://datashapes.org/dash> ;
  owl:imports <http://tno.io/BusinessService> ;
  owl:imports <http://tno.io/Classifications> ;
  owl:imports <http://tno.io/DigitalTwin> ;
  owl:imports <http://tno.io/Event> ;
  owl:imports <http://www.w3.org/2004/02/skos/core> ;
  owl:imports sh: ;
  owl:versionInfo "Created with TopBraid Composer"^^xsd:string ;
.

 #[exampleRuleforusingsh:SPARQLConstraint]IfacargoisoftypeDangerouseGood,thenitmustbeeithercode1orcode2. 

:cargo_shape a sh:NodeShape ;
sh:targetSubjectsOf DT:classification_detail ;
sh:property [
        sh:path DT:classification_detail ;
        sh:sparql [
           a sh:SPARQLConstraint ;
           sh:message "Cargo should be either code 1 or code 2" ;
           sh:prefixes DT: ;
           sh:select """
            SELECT $this ?value
            WHERE {
             $this dt:classification_detail ?type_detail;
              $PATH ?value.
            filter (?type_detail = Classifications:DangerouseGoods && ?value != Classifications:Code_1 && ?value != Classifications:code_2)
            }
            """ ;
        ] ;
    ] ;
.

:natureofCargo_shape a sh:NodeShape;
sh:targetSubjectOf DT:natureofCargo ;
  
sh:property [
        sh:path DT:natureofCargo ;
		sh:minCount 1 ;
   ];
   .
   

